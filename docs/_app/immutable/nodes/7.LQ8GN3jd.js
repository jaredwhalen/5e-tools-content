import{s as G,a as ne,f as M,u as se,g as oe,d as ie,h as X,j as L,c as ge,o as de,k as ze}from"../chunks/scheduler.Bcq-ceBY.js";import{S as q,i as U,D as re,y as w,E as fe,a as W,d as v,F as O,g as S,h as T,v as E,w as P,o as F,q as ae,r as ue,u as ce,x as he,z as be,e as A,s as ke,c as B,f as pe,l as D,A as k,n as _e,G as Y,B as ve,I}from"../chunks/index.B76XqI-1.js";import{e as j}from"../chunks/each.D6YF6ztN.js";import{t as Ne}from"../chunks/stone-texture.DhvALjnT.js";import{p as we}from"../chunks/stores.DGZFRqKU.js";import{f as J}from"../chunks/index.CKzTA16c.js";function R(l,e){const s={},t={},n={$$scope:1};let o=l.length;for(;o--;){const i=l[o],a=e[o];if(a){for(const h in i)h in a||(t[h]=1);for(const h in a)n[h]||(s[h]=a[h],n[h]=1);l[o]=a}else for(const h in i)n[h]=1}for(const i in t)i in s||(s[i]=void 0);return s}function We(l){return typeof l=="object"&&l!==null?l:{}}/**
 * @license lucide-svelte v0.474.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const K={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function Q(l,e,s){const t=l.slice();return t[11]=e[s][0],t[12]=e[s][1],t}function H(l){let e,s=[l[12]],t={};for(let n=0;n<s.length;n+=1)t=M(t,s[n]);return{c(){e=re(l[11]),this.h()},l(n){e=fe(n,l[11],{}),W(e).forEach(v),this.h()},h(){O(e,t)},m(n,o){S(n,e,o)},p(n,o){O(e,t=R(s,[o&32&&n[12]]))},d(n){n&&v(e)}}}function Z(l){let e=l[11],s,t=l[11]&&H(l);return{c(){t&&t.c(),s=w()},l(n){t&&t.l(n),s=w()},m(n,o){t&&t.m(n,o),S(n,s,o)},p(n,o){n[11]?e?G(e,n[11])?(t.d(1),t=H(n),e=n[11],t.c(),t.m(s.parentNode,s)):t.p(n,o):(t=H(n),e=n[11],t.c(),t.m(s.parentNode,s)):e&&(t.d(1),t=null,e=n[11])},d(n){n&&v(s),t&&t.d(n)}}}function Ee(l){let e,s,t,n,o,i=j(l[5]),a=[];for(let r=0;r<i.length;r+=1)a[r]=Z(Q(l,i,r));const h=l[10].default,_=ne(h,l,l[9],null);let z=[K,l[7],{width:l[2]},{height:l[2]},{stroke:l[1]},{"stroke-width":t=l[4]?Number(l[3])*24/Number(l[2]):l[3]},{class:n=l[6]("lucide-icon","lucide",l[0]?`lucide-${l[0]}`:"",l[8].class)}],p={};for(let r=0;r<z.length;r+=1)p=M(p,z[r]);return{c(){e=re("svg");for(let r=0;r<a.length;r+=1)a[r].c();s=w(),_&&_.c(),this.h()},l(r){e=fe(r,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var m=W(e);for(let f=0;f<a.length;f+=1)a[f].l(m);s=w(),_&&_.l(m),m.forEach(v),this.h()},h(){O(e,p)},m(r,m){S(r,e,m);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);T(e,s),_&&_.m(e,null),o=!0},p(r,[m]){if(m&32){i=j(r[5]);let f;for(f=0;f<i.length;f+=1){const g=Q(r,i,f);a[f]?a[f].p(g,m):(a[f]=Z(g),a[f].c(),a[f].m(e,s))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}_&&_.p&&(!o||m&512)&&se(_,h,r,r[9],o?ie(h,r[9],m,null):oe(r[9]),null),O(e,p=R(z,[K,m&128&&r[7],(!o||m&4)&&{width:r[2]},(!o||m&4)&&{height:r[2]},(!o||m&2)&&{stroke:r[1]},(!o||m&28&&t!==(t=r[4]?Number(r[3])*24/Number(r[2]):r[3]))&&{"stroke-width":t},(!o||m&257&&n!==(n=r[6]("lucide-icon","lucide",r[0]?`lucide-${r[0]}`:"",r[8].class)))&&{class:n}]))},i(r){o||(E(_,r),o=!0)},o(r){P(_,r),o=!1},d(r){r&&v(e),F(a,r),_&&_.d(r)}}}function Me(l,e,s){const t=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let n=X(e,t),{$$slots:o={},$$scope:i}=e,{name:a=void 0}=e,{color:h="currentColor"}=e,{size:_=24}=e,{strokeWidth:z=2}=e,{absoluteStrokeWidth:p=!1}=e,{iconNode:r=[]}=e;const m=(...f)=>f.filter((g,u,b)=>!!g&&b.indexOf(g)===u).join(" ");return l.$$set=f=>{s(8,e=M(M({},e),L(f))),s(7,n=X(e,t)),"name"in f&&s(0,a=f.name),"color"in f&&s(1,h=f.color),"size"in f&&s(2,_=f.size),"strokeWidth"in f&&s(3,z=f.strokeWidth),"absoluteStrokeWidth"in f&&s(4,p=f.absoluteStrokeWidth),"iconNode"in f&&s(5,r=f.iconNode),"$$scope"in f&&s(9,i=f.$$scope)},e=L(e),[a,h,_,z,p,r,m,n,e,i,o]}class Se extends q{constructor(e){super(),U(this,e,Me,Ee,G,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function ye(l){let e;const s=l[2].default,t=ne(s,l,l[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,o){t&&t.m(n,o),e=!0},p(n,o){t&&t.p&&(!e||o&8)&&se(t,s,n,n[3],e?ie(s,n[3],o,null):oe(n[3]),null)},i(n){e||(E(t,n),e=!0)},o(n){P(t,n),e=!1},d(n){t&&t.d(n)}}}function Ce(l){let e,s;const t=[{name:"rotate-ccw"},l[1],{iconNode:l[0]}];let n={$$slots:{default:[ye]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)n=M(n,t[o]);return e=new Se({props:n}),{c(){ae(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,i){ce(e,o,i),s=!0},p(o,[i]){const a=i&3?R(t,[t[0],i&2&&We(o[1]),i&1&&{iconNode:o[0]}]):{};i&8&&(a.$$scope={dirty:i,ctx:o}),e.$set(a)},i(o){s||(E(e.$$.fragment,o),s=!0)},o(o){P(e.$$.fragment,o),s=!1},d(o){he(e,o)}}}function Ie(l,e,s){let{$$slots:t={},$$scope:n}=e;const o=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];return l.$$set=i=>{s(1,e=M(M({},e),L(i))),"$$scope"in i&&s(3,n=i.$$scope)},e=L(e),[o,e,t,n]}class Pe extends q{constructor(e){super(),U(this,e,Ie,Ce,G,{})}}function $(l,e,s){const t=l.slice();return t[16]=e[s],t[18]=s,t}function x(l,e,s){const t=l.slice();return t[19]=e[s],t[21]=s,t}function ee(l){let e,s,t,n=`url(${Ne})`,o,i,a,h=`${l[5]+l[8][l[0]].size/2}in`,_=`${l[6]+l[8][l[0]].size+1}in`,z,p,r,m,f=j(l[1]),g=[];for(let u=0;u<f.length;u+=1)g[u]=le($(l,f,u));return a=new Pe({}),{c(){e=A("div"),s=A("div"),t=A("div");for(let u=0;u<g.length;u+=1)g[u].c();o=ke(),i=A("button"),ae(a.$$.fragment),this.h()},l(u){e=B(u,"DIV",{class:!0});var b=W(e);s=B(b,"DIV",{class:!0});var c=W(s);t=B(c,"DIV",{class:!0});var d=W(t);for(let N=0;N<g.length;N+=1)g[N].l(d);d.forEach(v),c.forEach(v),o=pe(b),i=B(b,"BUTTON",{class:!0});var y=W(i);ue(a.$$.fragment,y),y.forEach(v),b.forEach(v),this.h()},h(){D(t,"class","puzzle-container svelte-byuvby"),k(t,"--bg-texture",n),D(s,"class","grid-container svelte-byuvby"),D(i,"class","reset-button svelte-byuvby"),k(i,"--puzzle-center",h),k(i,"--puzzle-bottom",_),D(e,"class","puzzle-wrapper svelte-byuvby"),k(e,"--grid-width",l[3]),k(e,"--grid-height",l[4]),k(e,"--puzzle-size",l[8][l[0]].size),k(e,"--offset-x",l[5]),k(e,"--offset-y",l[6])},m(u,b){S(u,e,b),T(e,s),T(s,t);for(let c=0;c<g.length;c+=1)g[c]&&g[c].m(t,null);T(e,o),T(e,i),ce(a,i,null),p=!0,r||(m=_e(i,"click",l[10]),r=!0)},p(u,b){if(b&871){f=j(u[1]);let c;for(c=0;c<f.length;c+=1){const d=$(u,f,c);g[c]?g[c].p(d,b):(g[c]=le(d),g[c].c(),g[c].m(t,null))}for(;c<g.length;c+=1)g[c].d(1);g.length=f.length}b&33&&h!==(h=`${u[5]+u[8][u[0]].size/2}in`)&&k(i,"--puzzle-center",h),b&65&&_!==(_=`${u[6]+u[8][u[0]].size+1}in`)&&k(i,"--puzzle-bottom",_),b&8&&k(e,"--grid-width",u[3]),b&16&&k(e,"--grid-height",u[4]),b&1&&k(e,"--puzzle-size",u[8][u[0]].size),b&32&&k(e,"--offset-x",u[5]),b&64&&k(e,"--offset-y",u[6])},i(u){p||(E(a.$$.fragment,u),u&&ze(()=>{p&&(z||(z=Y(e,J,{},!0)),z.run(1))}),p=!0)},o(u){P(a.$$.fragment,u),u&&(z||(z=Y(e,J,{},!1)),z.run(0)),p=!1},d(u){u&&v(e),F(g,u),he(a),u&&z&&z.end(),r=!1,m()}}}function te(l){let e,s,t;function n(){return l[11](l[18],l[21])}return{c(){e=A("button"),this.h()},l(o){e=B(o,"BUTTON",{class:!0}),W(e).forEach(v),this.h()},h(){D(e,"class","puzzle-button svelte-byuvby"),I(e,"lit",l[19]===1),I(e,"target",l[8][l[0]].pattern[l[18]][l[21]]===1),I(e,"success",l[2]&&l[19]===1&&l[8][l[0]].pattern[l[18]][l[21]]===1),k(e,"--row",l[6]+l[18]),k(e,"--col",l[5]+l[21])},m(o,i){S(o,e,i),s||(t=_e(e,"click",n),s=!0)},p(o,i){l=o,i&2&&I(e,"lit",l[19]===1),i&257&&I(e,"target",l[8][l[0]].pattern[l[18]][l[21]]===1),i&263&&I(e,"success",l[2]&&l[19]===1&&l[8][l[0]].pattern[l[18]][l[21]]===1),i&64&&k(e,"--row",l[6]+l[18]),i&32&&k(e,"--col",l[5]+l[21])},d(o){o&&v(e),s=!1,t()}}}function le(l){let e,s=j(l[16]),t=[];for(let n=0;n<s.length;n+=1)t[n]=te(x(l,s,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=w()},l(n){for(let o=0;o<t.length;o+=1)t[o].l(n);e=w()},m(n,o){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(n,o);S(n,e,o)},p(n,o){if(o&871){s=j(n[16]);let i;for(i=0;i<s.length;i+=1){const a=x(n,s,i);t[i]?t[i].p(a,o):(t[i]=te(a),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){n&&v(e),F(t,n)}}}function je(l){let e,s,t=!l[7]&&ee(l);return{c(){t&&t.c(),e=w()},l(n){t&&t.l(n),e=w()},m(n,o){t&&t.m(n,o),S(n,e,o),s=!0},p(n,[o]){n[7]?t&&(ve(),P(t,1,1,()=>{t=null}),be()):t?(t.p(n,o),o&128&&E(t,1)):(t=ee(n),t.c(),E(t,1),t.m(e.parentNode,e))},i(n){s||(E(t),s=!0)},o(n){P(t),s=!1},d(n){n&&v(e),t&&t.d(n)}}}const V=1.4;function Te(l){return Array(l).fill().map(()=>Array(l).fill(0))}function Ae(l,e,s){let t;ge(l,we,c=>s(13,t=c));const n=[{name:"Pentagram",pattern:[[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0]],size:5},{name:"Pleiades",pattern:[[0,1,0,1,0,0],[1,0,1,0,1,0],[0,1,0,1,0,1],[1,0,1,0,1,0],[0,1,0,1,0,0],[0,0,1,0,0,0]],size:6},{name:"Orion",pattern:[[1,0,1,0,1],[0,1,1,1,0],[1,1,0,1,1],[0,1,1,1,0],[1,0,1,0,1]],size:5}];let o=0,i=[],a=!1,h=20,_=20,z=0,p=0,r=!1;function m(){s(3,h=Math.floor(window.innerWidth/(96*V))),s(4,_=Math.floor(window.innerHeight/(96*V))),s(5,z=Math.floor((h-n[o].size)/2)),s(6,p=Math.floor((_-n[o].size)/2)),s(5,z=Math.max(1,z)),s(6,p=Math.max(1,p)),document.documentElement.style.setProperty("--inch-scale",`${V}`)}de(()=>{const c=t.url.searchParams.get("puzzle");if(c){const d=parseInt(c)-1;d>=0&&d<n.length&&s(0,o=d)}return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}});function f(c,d){if(a)return;s(1,i[c][d]=i[c][d]?0:1,i);const y=[[c-1,d],[c+1,d],[c,d-1],[c,d+1]];for(let[N,C]of y)N>=0&&N<i.length&&C>=0&&C<i[0].length&&s(1,i[N][C]=i[N][C]?0:1,i);s(1,i=[...i]),g()}function g(){const c=n[o].pattern,d=i.every((y,N)=>y.every((C,me)=>c[N][me]===1?C===1:!0));console.log("Current state:",i),console.log("Target pattern:",c),console.log("Is match:",d),d&&(s(2,a=!0),setTimeout(()=>{o<n.length-1?(s(0,o++,o),s(2,a=!1),u()):s(7,r=!0)},2e3))}function u(){const c=n[o].size;s(1,i=Te(c)),s(2,a=!1)}const b=(c,d)=>f(c,d);return l.$$.update=()=>{l.$$.dirty&1&&u()},[o,i,a,h,_,z,p,r,n,f,u,b]}class Ve extends q{constructor(e){super(),U(this,e,Ae,je,G,{})}}export{Ve as component};
