import{s as $,c as x,o as ee,l as N,k as le}from"../chunks/scheduler.Bcq-ceBY.js";import{S as se,i as te,y as S,g as j,v as P,w as V,z as ne,d as y,e as M,s as D,c as U,a as B,f as E,l as p,A as ae,h as d,G as O,o as q,t as X,b as Y,I as v,n as Z,B as re}from"../chunks/index.B76XqI-1.js";import{e as R}from"../chunks/each.D6YF6ztN.js";import{t as oe}from"../chunks/stone-texture.DhvALjnT.js";import{p as ie}from"../chunks/stores.BNhMIKq1.js";import{f as F}from"../chunks/index.CKzTA16c.js";const ue=""+new URL("../assets/moon.Ccv5ymct.jpg",import.meta.url).href,fe=""+new URL("../assets/harvest.n7avn2mQ.jpg",import.meta.url).href,ce=""+new URL("../assets/buck.BL49IN0T.jpg",import.meta.url).href,he=""+new URL("../assets/wolf.LNP3PoOU.jpg",import.meta.url).href,me=""+new URL("../assets/beaver.CRh50FA6.jpg",import.meta.url).href;function H(e,l,s){const t=e.slice();return t[12]=l[s],t[14]=s,t}function Q(e,l,s){const t=e.slice();return t[12]=l[s],t[14]=s,t}function W(e){let l,s,t,o,f,_,c,u,r,b,T,k,I,C=`url(${oe})`,i,w=R(Array(12)),h=[];for(let a=0;a<w.length;a+=1)h[a]=J(Q(e,w,a));let A=R(Array(31)),m=[];for(let a=0;a<A.length;a+=1)m[a]=K(H(e,A,a));return{c(){l=M("div"),s=M("div"),t=M("img"),_=D(),c=M("img"),r=D(),b=M("div");for(let a=0;a<h.length;a+=1)h[a].c();T=D(),k=M("div");for(let a=0;a<m.length;a+=1)m[a].c();this.h()},l(a){l=U(a,"DIV",{class:!0});var g=B(l);s=U(g,"DIV",{class:!0});var n=B(s);t=U(n,"IMG",{class:!0,src:!0,alt:!0}),_=E(n),c=U(n,"IMG",{src:!0,class:!0}),n.forEach(y),r=E(g),b=U(g,"DIV",{class:!0});var z=B(b);for(let L=0;L<h.length;L+=1)h[L].l(z);z.forEach(y),T=E(g),k=U(g,"DIV",{class:!0});var G=B(k);for(let L=0;L<m.length;L+=1)m[L].l(G);G.forEach(y),g.forEach(y),this.h()},h(){p(t,"class","rune svelte-42nix4"),N(t.src,o=e[5][e[0]].image)||p(t,"src",o),p(t,"alt",f=e[5][e[0]].name),N(c.src,u=ue)||p(c,"src",u),p(c,"class","svelte-42nix4"),p(s,"class","puzzle-image svelte-42nix4"),p(b,"class","month-selector svelte-42nix4"),p(k,"class","day-selector svelte-42nix4"),p(l,"class","container svelte-42nix4"),ae(l,"--bg-texture",C)},m(a,g){j(a,l,g),d(l,s),d(s,t),d(s,_),d(s,c),d(l,r),d(l,b);for(let n=0;n<h.length;n+=1)h[n]&&h[n].m(b,null);d(l,T),d(l,k);for(let n=0;n<m.length;n+=1)m[n]&&m[n].m(k,null);i=!0},p(a,g){if((!i||g&1&&!N(t.src,o=a[5][a[0]].image))&&p(t,"src",o),(!i||g&1&&f!==(f=a[5][a[0]].name))&&p(t,"alt",f),g&111){w=R(Array(12));let n;for(n=0;n<w.length;n+=1){const z=Q(a,w,n);h[n]?h[n].p(z,g):(h[n]=J(z),h[n].c(),h[n].m(b,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=w.length}if(g&175){A=R(Array(31));let n;for(n=0;n<A.length;n+=1){const z=H(a,A,n);m[n]?m[n].p(z,g):(m[n]=K(z),m[n].c(),m[n].m(k,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=A.length}},i(a){i||(a&&le(()=>{i&&(I||(I=O(l,F,{},!0)),I.run(1))}),i=!0)},o(a){a&&(I||(I=O(l,F,{},!1)),I.run(0)),i=!1},d(a){a&&y(l),q(h,a),q(m,a),a&&I&&I.end()}}}function J(e){let l,s=e[14]+1+"",t,o,f,_;function c(){return e[8](e[14])}return{c(){l=M("button"),t=X(s),o=D(),this.h()},l(u){l=U(u,"BUTTON",{class:!0});var r=B(l);t=Y(r,s),o=E(r),r.forEach(y),this.h()},h(){p(l,"class","svelte-42nix4"),v(l,"glow",e[1]===e[14]+1),v(l,"success-glow",e[1]===e[5][e[0]].month&&e[2]===e[5][e[0]].day),v(l,"failure-glow",e[3]&&e[1]===e[14]+1)},m(u,r){j(u,l,r),d(l,t),d(l,o),f||(_=Z(l,"click",c),f=!0)},p(u,r){e=u,r&2&&v(l,"glow",e[1]===e[14]+1),r&39&&v(l,"success-glow",e[1]===e[5][e[0]].month&&e[2]===e[5][e[0]].day),r&10&&v(l,"failure-glow",e[3]&&e[1]===e[14]+1)},d(u){u&&y(l),f=!1,_()}}}function K(e){let l,s=e[14]+1+"",t,o,f,_;function c(){return e[9](e[14])}return{c(){l=M("button"),t=X(s),o=D(),this.h()},l(u){l=U(u,"BUTTON",{class:!0});var r=B(l);t=Y(r,s),o=E(r),r.forEach(y),this.h()},h(){p(l,"class","svelte-42nix4"),v(l,"glow",e[2]===e[14]+1),v(l,"success-glow",e[1]===e[5][e[0]].month&&e[2]===e[5][e[0]].day),v(l,"failure-glow",e[3]&&e[2]===e[14]+1)},m(u,r){j(u,l,r),d(l,t),d(l,o),f||(_=Z(l,"click",c),f=!0)},p(u,r){e=u,r&4&&v(l,"glow",e[2]===e[14]+1),r&39&&v(l,"success-glow",e[1]===e[5][e[0]].month&&e[2]===e[5][e[0]].day),r&12&&v(l,"failure-glow",e[3]&&e[2]===e[14]+1)},d(u){u&&y(l),f=!1,_()}}}function _e(e){let l,s=!e[4]&&W(e);return{c(){s&&s.c(),l=S()},l(t){s&&s.l(t),l=S()},m(t,o){s&&s.m(t,o),j(t,l,o)},p(t,[o]){t[4]?s&&(re(),V(s,1,1,()=>{s=null}),ne()):s?(s.p(t,o),o&16&&P(s,1)):(s=W(t),s.c(),P(s,1),s.m(l.parentNode,l))},i(t){P(s)},o(t){V(s)},d(t){t&&y(l),s&&s.d(t)}}}function ge(e,l,s){let t;x(e,ie,i=>s(10,t=i));const o=[{name:"Harvest",image:fe,month:10,day:6},{name:"Buck",image:ce,month:7,day:10},{name:"Wolf",image:he,month:1,day:13},{name:"Beaver",image:me,month:11,day:5}];let f=0,_=null,c=null,u=!1,r=!1;ee(()=>{const i=t.url.searchParams.get("puzzle");if(i){const w=parseInt(i)-1;w>=0&&w<o.length&&s(0,f=w)}});function b(i){s(1,_=i),k()}function T(i){s(2,c=i),k()}function k(){if(_===null||c===null)return;const i=o[f];_===i.month&&c===i.day?setTimeout(()=>{f<o.length-1?(s(0,f++,f),s(1,_=null),s(2,c=null)):s(4,r=!0)},2e3):(s(3,u=!0),setTimeout(()=>{s(3,u=!1),s(1,_=null),s(2,c=null)},500))}return[f,_,c,u,r,o,b,T,i=>b(i+1),i=>T(i+1)]}class ye extends se{constructor(l){super(),te(this,l,ge,_e,$,{})}}export{ye as component};
